#!/bin/bash
# mindevenviro wecker
# does beep if you should get up
LANG="C" ;
readonly empty='' ;

		if [[ ! $EUID =~ 1[0-9][0-9][0-9] ]] ;
	then
		echo "USAGE: dwecker" ;
		exit 0 ;
	else
	
beep(){
		while true
	do
		echo -e \\07 && echo -e \\07 ;
		sleep .3 ;
	done
}
		exec 3>&1;
		result=$(dialog --inputbox minutes 0 0 2>&1 1>&3);
	
		if [[ "$result" = "$empty" ]] ;
	then
		exit 0 ;
	else
		let seconds="$result"*30
		exitcode=$?;
		exec 3>&-;

		while true
	do
		for i in $(seq 0 3 99) ;
	do
		if [[ "$seconds" != "0" ]] ;
	then
		((seconds--)) ;
		sleep 1 ;
		echo $i | dialog --gauge "soon beep..." 10 60 5; 
		echo $seconds
	else
		clear ;
		beep ;
fi
	done
done
fi
fi
